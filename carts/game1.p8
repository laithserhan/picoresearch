pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- game 1 
-- by matthew phelps

-- page 1

-- the storyline
-- rats have gotten into
--    the basement! they must
--    have smelled my grandma's
--    cheddar. and now they've
--    come through the pipes. 

function _init()

end

function _update()
    move_player()

    animtimer_increment()
end

function _draw()
    cls(config.bgcolor)
    draw_land()
    draw_player()
    --draw_floor(10)
    draw_border()
    --draw_pipes()
    --map(17, 0, 25, 7, 7, 7) -- celx, cely, sx, sy, celw, celh, [layer]
end

-->8
-- page 2 (drawing)

-- drawing pipe sprites note:
-- definitely don't need to add
-- shadow to sprites. just write
-- shadow_spr func which takes
-- red pipe or whatever and does
-- colored shadow beneath (pal)

-- g means global
gsprites = {
    border = 72
}
gmap = {
    border = {x = 112, y = 0},
    land = {x = 16,y = 0},
    title = {x = 0, y = 0}
}
draw_floor = function(floorspr)
    for i = 2,13 do
        for j = 5,11 do
            spr(floorspr, i*8, j*8)
        end
    end
end

draw_land = function()
    map(gmap.land.x, gmap.land.y, 8, 8, 16, 16)
end

draw_pipes = function()
    map(17, 0, 25, 7, 7, 7)
end

draw_border = function()
    map(gmap.border.x, gmap.border.y, 0, 0, 16, 16)
end

draw_player = function()
    spr(pl.sprites[pl.frame], pl.x, pl.y, 1, 1, pl.lookLeft, false)
end

shadow_spr_below_with = function(sprn, col)

end
-->8
-- page 3 (config)

config = {
	bgcolor = 0
}
pl = {
    x = 30,
    y = 30,
    dx = 0,
    dy = 0,
    ddx = 0,
    decelx = 0,
    accelx = 0,
    decely = 0,
    sprites = {
        rest = 96,
        walk1 = 97,
        walk2 = 98,
        jump = 99
    },
    lookLeft = false,
    resting = true,
    animtimer = 0,
    frame = 'rest'
}
-->8
-- page 4 (updating)

move_player = function()

    if (btn(0)) then 
        if not pl.lookLeft then
            pl.lookLeft = true
        end
        pl.x -= 1.0
        pl.frame = next_pl_walk()
        return 
    end
    if (btn(1)) then 
        if pl.lookLeft then
            pl.lookLeft = false
        end
        pl.x += 1.0
        pl.frame = next_pl_walk() 
        return 
    end
    --if (btn(2)) then pl.y -= 3 end
    --if (btn(3)) then pl.y += 3 end
    -- else ...
    pl.frame = "rest"
end
animtimer_increment = function()
    pl.animtimer = (pl.animtimer + 1)%10
end
next_pl_walk = function()
    if (pl.animtimer > 4) then
        return "walk1";
    else 
        return "walk2";
    end
end
__gfx__
00000000008888000000000000000000008888000028880000333300000000000082880066776677dd55dd55d666666d0000000000000000eeeeeeee55555555
00000000008882800000000000000000082888000088220000331100000000000088880066776677dd55dd556d6666d10000000000000000e555555e55eeee55
007007000088888888800000000008888888880088888888333333338888828800888800776677ff55dd55dd66d66d110000000000000000eee5eeee55e55e55
000770000028888888288000000888888888820082888888333331338288888800888800776677ff55dd55dd666dd1110000000000000000eee5eeee55e55555
000770000028888288888000000882888288820088888888333333338888888800882800ff77ff77dd55dd55666dd1110000000000000000eee5eeee55eeee55
007007000002288888888800008888888882200088888888331333338888888800888800ff77ff77dd55dd5566d11d110000000033000000eee5eeee55555e55
000000000000022228888200008888822220000022222222111111112222222200888800776677ff55dd55dd6d1111d10000000033300000eee5eeee55e55e55
000000000000000002888800008888200000000000828800003313000000000000888800776677ff55dd55ddd111111d0000000033300000eeeeeeee55eee555
00000000008888000033330000333300008888000033330000888800000000000033330000000000000000000000000000000000333300000000000000000000
00000000008288800013333003333100082888000031330000882800000000000013330000000000000000000000000000000000333300000000000000000000
00000000338888288833333333333388888888338888888833888813333313330033330000000000000000000000000000000000333300000000000000000000
00000000132888882813313333333188888882338888888831888233333333330033330000000000000000000000000000000000333300000000000000000000
00000000333888888883333331333888828883138888288833888833333333130033310000000000000000000000000000000000333300000000000000000000
00000000333228888881133333311888888223338888882833888833313333330033330000000000000000000000000000000000333300000000000000000000
00000000133332222828811111188882222333312222222211888811111111110033330000000000000000000000000000000000333300000000000000000000
00000000013333000288880000882820003333100033310000888800000000000033310000000000000000000000000000000000333300000000000000000000
00000000ddddddddd6dd6ddd44999999000000000000000000000000cccccccccccccccc00000000000000000000070000000000000000000000000000000000
00000000ddddddddd6dd6ddd99444444000000000000000000000000cccccccccccccccc00000000000007000000000000000000000000000000000000000000
00000000ddddddddd6dd6ddd99444449000000000000000000007000cccccccccccccccc00000700000070700007000700000000000000000000000000000000
00000000dddddddd666666664499999900000000000000000007a700cccccccccccccccc00000000000007000000000000000000000000000000000000000000
00000000dddddddddd6ddd6d99444444000000000000000000337000cccccccccccccccc00000000000000000000070000000000000000000000000000000000
00000000dddddddddd6ddd6d99999994000000000000000000300000ccccc3cccccccccc00000000000000000000000000000000000000000000000000000000
00000000dddddddddd6ddd6d99999944000000000000000000330000ccccc3cccccccccc00000000000000000000000000000000000000000000000000000000
00000000dddddddd6666666644444499000000000000000000300000c3ccc3cccccccccc00000000000000000000000000000000000000000000000000000000
00000000009999000000000000bbbb000000000000000000cccccccc333333333333333344444444444494440000000000000000000000000000000000000000
00000000009999900000000000bbbbb00000000000000000cccccccc333333333333333344444944444444440000000000000000000000000000000000000000
00000000009999999999999900bbbbbbbbbbbbbb00000000cccccccc333333933339333394444444444444440000000000000000000000000000000000000000
000000000009999999999999000bbbbbbbbbbbbb00000000cccccccc393333333333333344444494449444440000000000000000000000000000000000000000
000000000009999999999999000bbbbbbbbbbbbb00000000cccccccc333333333333333344444444444444440000000000000000000000000000000000000000
00000000000009999999999900000bbbbbbbbbbb00000000cccccccc333393333333339344444444444444440000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000cccccccc333333333333333344944444444494440000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000c3ccccc3333333333393333344444444444444440000000000000000000000000000000000000000
00000000000000011100010000000000000000000000000000000000000000001111111166666666000000006666666666666666666666666666666666666666
00000000000011166611161000000000000000000000000000000000000000001111111166666666000000006666666666696666699999666966666669999666
00000000000166666616161000000000000000000000000000000000000000001151151166666666000000006699999966696666666966666966666669666666
00000000001666666616161000000000000000000000000000000000000000001111111166666666000000006666966666696666666966666966666669666666
00000000016666111110161000000000000000000000000000000000000000001111111166666666000000006666966666696666666966666966666669996666
00000000016111199100010000000000000000000000000000000000000000001151151166666666000000006666966666696666666966666999996669666666
00000000001000199100000000000000000000000000000000000000000000001111111166666666000000006666966666666666666966666666666669999966
00000000000000199100000000000000000000000000000000000000000000001111111166666666000000006666666666666666666666666666666666666666
00000000000000199100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000199100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000199100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000199100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000199100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000199100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000199100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000997000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00997000009970000099700000999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00999900009999000099990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00fff00000fff00000fff00000fff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00eff00000eff00000eff0000feff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00eea0000feea0000feea00000eea000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00fee00000eee50005eee00005eee500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00505000005000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
4949494949494949494949494949494928282828282828282828282828280000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048484848484848484848484848484848
4949494949494949494949494949494928282828282828282828282828280000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
4949494949494949494949494949494928282828282828282828282828280000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
4949494949494949494949494949494927273627362736273627272736270000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
4949494949494949494949494949494937383738373837383738373837380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
49494949494b4c4d4e4f49494949494939393939393939393939393939390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
494949494949494949494949494949490b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
494949494949494949494949494949490b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
494949494949494949494949494949490b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
494949494949494949494949494949490b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
494949494949494949494949494949490b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
494949494949494949494949494949490b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
494949494949494949494949494949490b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
494949494949494949494949494949490b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
000000000000000000000000000000000b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048000000000000000000000000000048
000000000000000000000000000000000b0a0b0a0b0a0b0a0b0a0b0a0b0a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000048484848484848484848484848484848
__sfx__
010700001035010350103501035010350101501015010150101501015010150101501015010150101501015010150101501015010150101501015010150101501015010150101501015010150101501015010150
01100000101501c1501c1501c1501c1500f1500f1500f1500f1500f1501d150111501015010150101501015010650106501065010650106501065010650106501065010150101501015010150101501015010150
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010e0000151501515014150151501515014150171501505015150151501515015150151501b1501715015050151501515015150151501515014150171501505015150151501515015150151501b1501715015050
010e00001015010150101501015010150121501715010050101501015010150101501015012150171501005010150101501015010150101501b150171501005010150101501015010150101501a1501715010050
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000200002b7502e750307402e730267102f7002a3002a200252000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
01 08404344
02 09424344

